#include "testhdr.h"

#test simtest_4
	fputs("Simple test 4: Attempt to run insert, find and delete functions w/ NULL arguments.\n", stderr);

	int key[2];
	key[0] = sizeof(int);
	key[1] = 10000;
	const int32_t key_len = sizeof(int);
	int val[2];
	val[0] = sizeof(int);
	val[1] = 10000;
	const int32_t val_len = sizeof(int);

	prepareVolume();
	
	db_handle *db = newDb(DBNAME, PATHNAME, SIZE);
	
	puts("\n\n");

	srand(time(NULL));
	
	puts("Start.\n");

	fail_unless(findKey(db, NULL) != NULL, "Find function error");
	fail_unless(deleteKey(db, NULL) != 10, "Delete function error");

	insertKeyValue(db, NULL, val, 0);
	insertKeyValue(db, key, NULL, 0);
	insertKeyValue(db, NULL, NULL, 0);

	// snapshot
	snapshot(db->volume_desc);
	
	puts("\n\n");
	
	/*fprintf(stderr, "%sPASS = %llu%s\n", TEXT_GREEN, pass, TEXT_NORMAL);
	fprintf(stderr, "%sFAIL = %llu%s\n", TEXT_RED, fail, TEXT_NORMAL); */
	
	puts("Tests done.");