---
install_lib:
    image: carvicsforth/ubuntu_carv:latest
    stage: install
    variables:
        LIB_INSTALL_PATH: installtest
    script:
        - mkdir -p build;cd build
        - cmake .. -DBUILD_SHARED_LIBS=ON -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=gcc-10 -DCMAKE_CXX_COMPILER=g++-10
        - make install DESTDIR=$LIB_INSTALL_PATH;
        - cmake .. -DBUILD_SHARED_LIBS=OFF -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER=gcc-10 -DCMAKE_CXX_COMPILER=g++-10
        - make install DESTDIR=$LIB_INSTALL_PATH;
        - mv $LIB_INSTALL_PATH ../scripts/;cd ../scripts
        - ./verify-installed-files.py $LIB_INSTALL_PATH
